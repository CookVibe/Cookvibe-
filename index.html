<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CookVibe ‚Ä¢ Stage 1 Demo</title>
  <style>
    :root{
      --bg:#0b0f0e;
      --card:#121816;
      --text:#f1f5f4;
      --muted:#a7b3b0;
      --green:#1fbf7a;
      --gold:#d9b75f;
      --line:#23302c;
      --danger:#ff5a5f;
      --ok:#35d07f;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 700px at 20% 0%, rgba(31,191,122,.18), transparent 60%),
                  radial-gradient(1100px 600px at 80% 10%, rgba(217,183,95,.14), transparent 55%),
                  var(--bg);
      color:var(--text);
    }
    .wrap{max-width:980px;margin:0 auto;padding:22px 16px 40px}
    .top{
      display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;
      padding:14px 16px; border:1px solid var(--line); border-radius:14px; background:rgba(18,24,22,.92);
      position:sticky; top:0; backdrop-filter: blur(10px); z-index:10;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
    }
    .logo{
      width:38px;height:38px;border-radius:10px;
      background: linear-gradient(135deg, rgba(31,191,122,.95), rgba(217,183,95,.95));
      box-shadow: 0 8px 22px rgba(0,0,0,.35);
    }
    .brand h1{margin:0;font-size:18px;letter-spacing:.2px}
    .pill{
      font-size:12px;color:#0b0f0e;background:linear-gradient(135deg,var(--green),var(--gold));
      padding:6px 10px;border-radius:999px;font-weight:700;
    }
    .grid{
      display:grid; grid-template-columns: 1.1fr .9fr; gap:14px; margin-top:14px;
    }
    @media (max-width:860px){ .grid{grid-template-columns:1fr;} .top{position:relative; top:auto;} }
    .card{
      border:1px solid var(--line);
      background:rgba(18,24,22,.92);
      border-radius:14px; padding:16px;
      box-shadow: 0 10px 28px rgba(0,0,0,.30);
    }
    h2{margin:0 0 10px;font-size:16px}
    .small{color:var(--muted);font-size:12px;line-height:1.45}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    input, textarea, button{
      font:inherit;
    }
    input[type="text"], input[type="password"], textarea{
      width:100%;
      background:#0f1412;
      border:1px solid var(--line);
      color:var(--text);
      border-radius:12px;
      padding:12px 12px;
      outline:none;
    }
    textarea{min-height:110px;resize:vertical}
    button{
      background: linear-gradient(135deg,var(--green),var(--gold));
      color:#0b0f0e; border:0; border-radius:12px;
      padding:10px 12px; font-weight:800; cursor:pointer;
      box-shadow: 0 10px 22px rgba(0,0,0,.35);
    }
    button.secondary{
      background:#0f1412; color:var(--text);
      border:1px solid var(--line); box-shadow:none;
      font-weight:700;
    }
    .tag{
      display:inline-flex; align-items:center; gap:8px;
      border:1px solid var(--line); background:#0f1412; color:var(--text);
      padding:8px 10px; border-radius:999px; font-size:12px;
    }
    .hidden{display:none !important}
    .badge{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 10px;border-radius:999px;font-weight:800;font-size:12px;
      background:rgba(31,191,122,.14); border:1px solid rgba(31,191,122,.35);
    }
    .badge.gold{
      background:rgba(217,183,95,.14); border:1px solid rgba(217,183,95,.35);
    }
    .divider{height:1px;background:var(--line);margin:14px 0}
    .ok{color:var(--ok);font-weight:800}
    .danger{color:var(--danger);font-weight:800}
    a{color:var(--gold);text-decoration:none}
    video{background:#000}
    .toast{
      margin-top:10px; padding:10px 12px; border-radius:12px;
      border:1px solid var(--line); background:#0f1412;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div class="brand">
        <div class="logo"></div>
        <div>
          <h1>CookVibe ‚Ä¢ Stage 1 Demo</h1>
          <div class="small">Creator-first cooking videos + recipe Rolodex ‚Ä¢ Green & Gold</div>
        </div>
      </div>
      <div class="row">
        <span id="rolePill" class="tag">Not logged in</span>
        <span class="pill">EARLY ACCESS</span>
      </div>
    </div>

    <div class="grid">
      <!-- LEFT -->
      <div class="card">
        <h2>Login</h2>
        <p class="small">Enter an access code to view the demo.</p>

        <div class="row">
          <input id="accessCode" type="text" placeholder="Enter code (USERBETA / CREATORBETA / FOUNDING20)" />
          <button onclick="login()">Enter</button>
          <button class="secondary" onclick="logout()">Reset</button>
        </div>

        <div id="loginMsg" class="toast small hidden"></div>

        <div class="divider"></div>

        <h2>Demo Home</h2>
        <p class="small">
          This is a lightweight demo for creators to preview the experience. Some features are simulated for testing.
        </p>

        <div class="row" style="margin-top:10px;">
          <span id="userBadge" class="badge hidden">üë§ User Access</span>
          <span id="creatorBadge" class="badge hidden">üé¨ Creator Access</span>
          <span id="foundingBadge" class="badge gold hidden">‚≠ê Founding Creator</span>
        </div>

        <div id="foundingExplainer" class="toast small hidden">
          <div class="small">
            <strong>Founding Creator Benefit:</strong> Lifetime free creator subscription once CookVibe officially launches.<br>
            <span class="small">Demo note: this recognition is shown here and will be enforced when accounts/subscriptions go live.</span>
          </div>
        </div>

        <div class="divider"></div>

        <h2>Creator Introduction Video</h2>
        <p class="small">Creators can upload a short intro video to appear above cooking videos & the recipe Rolodex.</p>

        <p id="introStatus" class="small">No intro video saved yet.</p>

        <!-- Creator-only upload area -->
        <div id="introUpload" class="hidden">
          <input type="file" id="introFile" accept="video/*" />
          <div class="row" style="margin-top:10px;">
            <button onclick="saveIntro()">Save Intro Video</button>
          </div>

          <!-- Status -->
          <p id="introUploadStatus" class="small hidden"></p>

          <!-- Playback preview (works immediately after upload) -->
          <video id="introPreview" class="hidden" controls style="width:100%;margin-top:10px;border-radius:10px;"></video>
          <p class="small" style="opacity:.75;margin-top:6px;">
            Early access demo: the preview plays locally on this device/session. Cloud playback will be added in Stage 2.
          </p>

          <!-- Visible proof -->
          <div id="introProof" class="hidden card" style="margin-top:10px;">
            <p class="small" style="margin:0;"><strong>Intro Video Saved</strong></p>
            <p id="introProofName" class="small" style="margin:6px 0 0 0;"></p>
          </div>
        </div>

      </div>

      <!-- RIGHT -->
      <div class="card">
        <h2>Feedback</h2>
        <p class="small">
          Your feedback shapes the real CookVibe build. Be direct‚Äîwhat works, what‚Äôs confusing, what‚Äôs missing.
        </p>

        <textarea id="feedbackText" placeholder="Type feedback here..."></textarea>
        <div class="row" style="margin-top:10px;">
          <button onclick="sendFeedback()">Send Feedback</button>
        </div>
        <div id="feedbackMsg" class="toast small hidden"></div>

        <div class="divider"></div>

        <!-- Creator-only suggestions box -->
        <div id="creatorSuggestionsCard" class="hidden">
          <h2>Creator Suggestions (Creators Only)</h2>
          <p class="small">This card is hidden from users. Share product ideas, workflow needs, and what would help creators grow.</p>
          <textarea id="suggestionText" placeholder="Your suggestion..."></textarea>
          <div class="row" style="margin-top:10px;">
            <button onclick="sendSuggestion()">Submit Suggestion</button>
          </div>
          <div id="suggestionMsg" class="toast small hidden"></div>
        </div>

        <div class="divider"></div>

        <h2>Support</h2>
        <p class="small">
          Contact: <strong>hello@cookvibe.co</strong><br>
          Operated by <strong>The Start UPZ, LLC</strong>
        </p>
      </div>
    </div>
  </div>

<script>
  // ======= BASIC ROLE LOGIC =======
  const CODES = {
    USER: "USERBETA",
    CREATOR: "CREATORBETA",
    FOUNDING: "FOUNDING20"
  };

  let sessionVideoURL = null; // holds local object URL for playback in-session only

  function setRolePill(text){
    const el = document.getElementById("rolePill");
    el.innerText = text;
  }

  function showMsg(id, text, ok=true){
    const el = document.getElementById(id);
    el.classList.remove("hidden");
    el.innerHTML = (ok ? `<span class="ok">${text}</span>` : `<span class="danger">${text}</span>`);
  }

  function clearMsg(id){
    const el = document.getElementById(id);
    el.classList.add("hidden");
    el.innerHTML = "";
  }

  function login(){
    const raw = (document.getElementById("accessCode").value || "").trim();
    const code = raw.toUpperCase();

    clearMsg("loginMsg");

    if(!code){
      showMsg("loginMsg","Please enter an access code.", false);
      return;
    }

    if(code !== CODES.USER && code !== CODES.CREATOR && code !== CODES.FOUNDING){
      showMsg("loginMsg","Invalid code. Try USERBETA, CREATORBETA, or FOUNDING20.", false);
      return;
    }

    localStorage.setItem("cv_role_code", code);
    applyAccess();
    showMsg("loginMsg","Access granted.", true);
  }

  function logout(){
    localStorage.removeItem("cv_role_code");
    // keep demo feedback entries if you want; removing access is enough
    applyAccess(true);
    showMsg("loginMsg","Reset complete. You are logged out.", true);
  }

  function applyAccess(isLogout=false){
    const code = localStorage.getItem("cv_role_code");

    // Reset UI
    document.getElementById("userBadge").classList.add("hidden");
    document.getElementById("creatorBadge").classList.add("hidden");
    document.getElementById("foundingBadge").classList.add("hidden");
    document.getElementById("foundingExplainer").classList.add("hidden");

    document.getElementById("introUpload").classList.add("hidden");
    document.getElementById("creatorSuggestionsCard").classList.add("hidden");

    if(isLogout || !code){
      setRolePill("Not logged in");
      return;
    }

    if(code === CODES.USER){
      setRolePill("üë§ USER");
      document.getElementById("userBadge").classList.remove("hidden");
      // user cannot upload or see creator suggestions
    }

    if(code === CODES.CREATOR){
      setRolePill("üé¨ CREATOR");
      document.getElementById("creatorBadge").classList.remove("hidden");
      document.getElementById("introUpload").classList.remove("hidden");
      document.getElementById("creatorSuggestionsCard").classList.remove("hidden");
    }

    if(code === CODES.FOUNDING){
      setRolePill("‚≠ê FOUNDING CREATOR");
      document.getElementById("creatorBadge").classList.remove("hidden");
      document.getElementById("foundingBadge").classList.remove("hidden");
      document.getElementById("foundingExplainer").classList.remove("hidden");
      document.getElementById("introUpload").classList.remove("hidden");
      document.getElementById("creatorSuggestionsCard").classList.remove("hidden");
    }

    loadIntroStatus();
  }

  // ======= INTRO VIDEO (DEMO) =======
  function saveIntro(){
    const statusEl = document.getElementById("introUploadStatus");
    const proofBox = document.getElementById("introProof");
    const proofName = document.getElementById("introProofName");
    const input = document.getElementById("introFile");
    const preview = document.getElementById("introPreview");
    const f = input.files[0];

    statusEl.classList.add("hidden");
    proofBox.classList.add("hidden");

    if(!f){
      statusEl.classList.remove("hidden");
      statusEl.innerHTML = `<span class="danger">Please choose a video file first.</span>`;
      return;
    }

    // Uploading state (simulated)
    statusEl.classList.remove("hidden");
    statusEl.innerHTML = `Uploading video‚Ä¶`;

    setTimeout(() => {
      // Save filename for demo persistence
      localStorage.setItem("cv_intro_name", f.name);

      // In-session playback preview
      // Revoke any previous object URL to avoid memory leaks
      if(sessionVideoURL) URL.revokeObjectURL(sessionVideoURL);
      sessionVideoURL = URL.createObjectURL(f);
      preview.src = sessionVideoURL;
      preview.classList.remove("hidden");

      // Confirmation UI
      statusEl.innerHTML = `<span class="ok">‚úÖ Upload complete ‚Äî preview ready.</span>`;
      proofBox.classList.remove("hidden");
      proofName.innerText = "Saved file: " + f.name;

      document.getElementById("introStatus").innerHTML = `<span class="ok">‚úÖ Intro video saved:</span> ${escapeHtml(f.name)}`;

      // Reset input to allow re-upload
      input.value = "";
    }, 650);
  }

  function loadIntroStatus(){
    const n = localStorage.getItem("cv_intro_name");
    const status = document.getElementById("introStatus");
    const proofBox = document.getElementById("introProof");
    const proofName = document.getElementById("introProofName");
    const preview = document.getElementById("introPreview");

    if(n){
      status.innerHTML = `<span class="ok">‚úÖ Intro video saved:</span> ${escapeHtml(n)}`;
      proofBox.classList.remove("hidden");
      proofName.innerText = "Saved file: " + n;

      // IMPORTANT: We cannot replay after refresh without a backend upload.
      // Keep preview hidden unless a fresh upload occurs in this session.
      preview.classList.add("hidden");
      preview.removeAttribute("src");
    } else {
      status.innerText = "No intro video saved yet.";
      proofBox.classList.add("hidden");
      preview.classList.add("hidden");
    }
  }

  // ======= FEEDBACK (LOCAL DEMO) =======
  function sendFeedback(){
    clearMsg("feedbackMsg");
    const text = (document.getElementById("feedbackText").value || "").trim();
    if(!text){
      showMsg("feedbackMsg","Please type feedback before sending.", false);
      return;
    }
    const arr = JSON.parse(localStorage.getItem("cv_feedback") || "[]");
    arr.push({ t: Date.now(), text });
    localStorage.setItem("cv_feedback", JSON.stringify(arr));
    document.getElementById("feedbackText").value = "";
    showMsg("feedbackMsg","‚úÖ Feedback received. Thank you!", true);
  }

  function sendSuggestion(){
    clearMsg("suggestionMsg");
    const text = (document.getElementById("suggestionText").value || "").trim();
    if(!text){
      showMsg("suggestionMsg","Please type a suggestion before submitting.", false);
      return;
    }
    const arr = JSON.parse(localStorage.getItem("cv_suggestions") || "[]");
    arr.push({ t: Date.now(), text });
    localStorage.setItem("cv_suggestions", JSON.stringify(arr));
    document.getElementById("suggestionText").value = "";
    showMsg("suggestionMsg","‚úÖ Suggestion received. Thank you!", true);
  }

  // small helper
  function escapeHtml(s){
    return String(s)
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  // Boot
  applyAccess();
</script>
</body>
</html>

